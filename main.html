<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Han’s Media – Guestbook</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      background: #ffffff;
      color: #111111;
      overflow-x: hidden;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    /* 상단 바 */
    header {
      position: sticky;
      top: 0;
      z-index: 10;
      background: rgba(255,255,255,0.9);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid #e5e5e5;
    }

    .nav {
      max-width: 960px;
      margin: 0 auto;
      padding: 14px 18px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .nav-logo {
      font-weight: 800;
      letter-spacing: -0.04em;
      font-size: 20px;
      text-transform: uppercase;
    }

    .nav-logo span {
      background: linear-gradient(135deg, #111 0%, #444 40%, #999 80%, #eee 100%);
      -webkit-background-clip: text;
      color: transparent;
    }

    .nav-links {
      display: flex;
      gap: 18px;
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: #555;
    }

    .nav-links a.active {
      color: #000;
      position: relative;
    }

    .nav-links a.active::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: -4px;
      width: 100%;
      height: 1.5px;
      background: #111;
    }

    /* 메인 레이아웃 */
    .page {
      max-width: 960px;
      margin: 0 auto;
      padding: 32px 18px 48px;
    }

    .hero {
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 1fr);
      gap: 32px;
      align-items: center;
      margin-bottom: 32px;
    }

    @media (max-width: 780px) {
      .hero {
        grid-template-columns: 1fr;
      }
    }

    .hero-title {
      font-size: clamp(26px, 4vw, 34px);
      font-weight: 800;
      letter-spacing: -0.04em;
      margin-bottom: 12px;
    }

    .hero-sub {
      font-size: 14px;
      color: #555;
      line-height: 1.7;
    }

    .hero-meta {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.22em;
      color: #999;
      margin-bottom: 8px;
    }

    .stat-card {
      border-radius: 18px;
      border: 1px solid #e5e5e5;
      padding: 18px 20px;
      box-shadow: 0 16px 40px rgba(0,0,0,0.06);
      position: relative;
      overflow: hidden;
    }

    .stat-card::before {
      content: "";
      position: absolute;
      inset: -40%;
      background: radial-gradient(circle at top left, #111 0%, transparent 55%);
      opacity: 0.03;
    }

    .stat-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: #777;
      margin-bottom: 8px;
    }

    .stat-value {
      font-size: 32px;
      font-weight: 800;
      letter-spacing: -0.05em;
      margin-bottom: 6px;
    }

    .stat-note {
      font-size: 12px;
      color: #777;
    }

    /* 방명록 카드 */
    .guestbook-card {
      margin-top: 12px;
      border-radius: 20px;
      border: 1px solid #e5e5e5;
      padding: 20px 20px 22px;
      box-shadow: 0 18px 40px rgba(0,0,0,0.05);
      position: relative;
      overflow: hidden;
    }

    .guestbook-card::before {
      content: "";
      position: absolute;
      right: -80px;
      top: -40px;
      width: 180px;
      height: 180px;
      border-radius: 32px;
      border: 1px solid #f1f1f1;
      transform: skew(-18deg);
      background: linear-gradient(135deg, rgba(0,0,0,0.02), transparent);
    }

    .guestbook-header {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 16px;
    }

    .guestbook-title {
      font-size: 16px;
      font-weight: 700;
      letter-spacing: 0.16em;
      text-transform: uppercase;
    }

    .guestbook-desc {
      font-size: 12px;
      color: #777;
    }

    /* 폼 */
    .guest-form {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-bottom: 16px;
      position: relative;
      z-index: 1;
    }

    .input-row {
      display: grid;
      grid-template-columns: 1.2fr 2.3fr;
      gap: 8px;
    }

    @media (max-width: 640px) {
      .input-row {
        grid-template-columns: 1fr;
      }
    }

    label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: #777;
    }

    input[type="text"],
    textarea {
      width: 100%;
      border-radius: 12px;
      border: 1px solid #e2e2e2;
      padding: 10px 12px;
      font-size: 13px;
      resize: vertical;
      min-height: 38px;
      background: rgba(255,255,255,0.9);
      outline: none;
      transition: border 0.2s, box-shadow 0.2s, background 0.2s;
    }

    textarea {
      min-height: 70px;
    }

    input[type="text"]:focus,
    textarea:focus {
      border-color: #111;
      box-shadow: 0 0 0 1px #111;
      background: #fff;
    }

    .helper {
      font-size: 11px;
      color: #aaa;
    }

    .submit-row {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      align-items: center;
    }

    .submit-btn {
      padding: 9px 22px;
      border-radius: 999px;
      border: 1px solid #111;
      background: #111;
      color: #fff;
      font-size: 12px;
      font-weight: 600;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      cursor: pointer;
      transition: 0.25s;
    }

    .submit-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.16);
    }

    .submit-btn:disabled {
      opacity: 0.6;
      cursor: default;
      box-shadow: none;
      transform: none;
    }

    /* 메시지 리스트 */
    .messages {
      list-style: none;
      margin-top: 8px;
      max-height: 320px;
      overflow-y: auto;
      padding-right: 4px;
    }

    .message-item {
      border-top: 1px solid #f0f0f0;
      padding: 10px 0 8px;
    }

    .message-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 8px;
      margin-bottom: 4px;
    }

    .message-name {
      font-size: 13px;
      font-weight: 600;
    }

    .message-meta {
      font-size: 11px;
      color: #aaa;
    }

    .message-body {
      font-size: 13px;
      color: #444;
      line-height: 1.5;
      white-space: pre-wrap;
    }

    .empty-state {
      font-size: 12px;
      color: #aaa;
      padding-top: 4px;
    }

    footer {
      margin-top: 32px;
      font-size: 11px;
      color: #999;
      text-align: right;
    }
  </style>
</head>
<body>
  <header>
    <nav class="nav">
      <div class="nav-logo">
        <a href="hansmedia.html"><span>HAN’S</span> MEDIA</a>
      </div>
      <div class="nav-links">
        <a href="hansmedia.html">Intro</a>
        <a href="main.html" class="active">Guestbook</a>
      </div>
    </nav>
  </header>

  <main class="page">
    <section class="hero">
      <div>
        <div class="hero-meta">GUESTBOOK · HAN’S MEDIA</div>
        <h1 class="hero-title">당신이 지나간 흔적이<br>뉴스보다 오래 남을지도.</h1>
        <p class="hero-sub">
          한스미디어의 실험실에 찾아온 사람들의 한 줄 기록.<br>
          오늘의 생각과 기분을 짧게 남겨 주세요.
          욕설·혐오 표현 없이, 서로를 존중하는 문장만 남겨주세요.
        </p>
      </div>

      <aside class="stat-card">
        <div class="stat-label">방문자 수</div>
        <div class="stat-value" id="messageCount">0</div>
        <div class="stat-note">
        </div>
      </aside>
    </section>

    <section class="guestbook-card">
      <header class="guestbook-header">
        <div class="guestbook-title">GUESTBOOK</div>
        <div class="guestbook-desc"> 방명록 </div>
      </header>

      <form class="guest-form" id="guestForm">
        <div class="input-row">
          <div>
            <label for="name">Name (optional)</label>
            <input type="text" id="name" placeholder="Han, Anonymous, or anything">
            <div class="helper"> 입력하지 않으면 자동으로 “비공개”로 저장됩니다.</div>
          </div>

          <div>
            <label for="message">Message</label>
            <textarea id="message" placeholder="내용"></textarea>
          </div>
        </div>

        <div class="submit-row">
          <span class="helper">※ 내용은 이 브라우저에만 저장됩니다. (실험용 로컬 방명록)</span>
          <button type="submit" class="submit-btn" id="submitBtn">POST</button>
        </div>
      </form>

      <ul class="messages" id="messageList">
        <!-- 메시지가 여기에 렌더링됩니다 -->
      </ul>

      <div class="empty-state" id="emptyState">
        아직 남겨진 메시지가 없습니다. 첫 번째 방명록을 남겨 보세요.
      </div>
    </section>
    
<script src="https://giscus.app/client.js"
        data-repo="pizza-boss/hansmedia"
        data-repo-id="R_kgDOQYCCxg"
        data-category="[ENTER CATEGORY NAME HERE]"
        data-category-id="[ENTER CATEGORY ID HERE]"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="ko"
        crossorigin="anonymous"
        async>
</script>
    
    <footer>
      © <span id="year"></span> Han’s Media · Prototype Guestbook
    </footer>
  </main>

  <script>
    const STORAGE_KEY = "hansMediaGuestbook";
    const form = document.getElementById("guestForm");
    const nameInput = document.getElementById("name");
    const messageInput = document.getElementById("message");
    const messageList = document.getElementById("messageList");
    const emptyState = document.getElementById("emptyState");
    const messageCount = document.getElementById("messageCount");
    const submitBtn = document.getElementById("submitBtn");

    document.getElementById("year").textContent = new Date().getFullYear();

    function loadMessages() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if (!raw) return [];
        const parsed = JSON.parse(raw);
        if (!Array.isArray(parsed)) return [];
        return parsed;
      } catch (e) {
        console.error("Failed to parse guestbook storage", e);
        return [];
      }
    }

    function saveMessages(list) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(list));
    }

    function formatDate(iso) {
      const d = new Date(iso);
      const y = d.getFullYear();
      const m = String(d.getMonth() + 1).padStart(2, "0");
      const day = String(d.getDate()).padStart(2, "0");
      const hh = String(d.getHours()).padStart(2, "0");
      const mm = String(d.getMinutes()).padStart(2, "0");
      return `${y}-${m}-${day} ${hh}:${mm}`;
    }

    function renderMessages() {
      const messages = loadMessages();
      messageList.innerHTML = "";

      if (messages.length === 0) {
        emptyState.style.display = "block";
        messageCount.textContent = "0";
        return;
      }

      emptyState.style.display = "none";
      messageCount.textContent = messages.length.toString();

      messages
        .slice()
        .reverse()
        .forEach(msg => {
          const li = document.createElement("li");
          li.className = "message-item";

          const header = document.createElement("div");
          header.className = "message-header";

          const nameEl = document.createElement("div");
          nameEl.className = "message-name";
          nameEl.textContent = msg.name;

          const metaEl = document.createElement("div");
          metaEl.className = "message-meta";
          metaEl.textContent = formatDate(msg.createdAt);

          header.appendChild(nameEl);
          header.appendChild(metaEl);

          const body = document.createElement("div");
          body.className = "message-body";
          body.textContent = msg.message;

          li.appendChild(header);
          li.appendChild(body);

          messageList.appendChild(li);
        });
    }

    form.addEventListener("submit", (event) => {
      event.preventDefault();
      const name = nameInput.value.trim() || "Anonymous";
      const message = messageInput.value.trim();

      if (!message) {
        alert("메시지를 입력해 주세요.");
        return;
      }

      submitBtn.disabled = true;

      const list = loadMessages();
      list.push({
        name,
        message,
        createdAt: new Date().toISOString()
      });
      saveMessages(list);
      renderMessages();

      messageInput.value = "";
      submitBtn.disabled = false;
    });

    // 초기 렌더링
    renderMessages();
  </script>
</body>
</html>
